library(ggplot2)
ggplot(dfpib, aes(x = date, y = pib_rs, color = "GDP (RS)")) +
geom_line(size = 0.9) +
labs(y = "GDP (RS)") +
scale_color_manual(
name = "Variables",
values = c("GDP (RS)" = "#0C4C8A", "IBC (RS)" = "#E69F00")
) +
scale_x_date(date_breaks = "1 year", date_labels = "%Y") +
theme_bw(base_size = 14, base_family = "EB Garamond") +
theme(
legend.position = "bottom",
axis.title.x = element_blank(),
plot.margin = margin(4, 8, 2, 8)
)
library(showtext)
library(sysfonts)
sysfonts::font_add_google("EB Garamond")
showtext::showtext_auto()
ggplot(dfpib, aes(x = date, y = pib_rs, color = "GDP (RS)")) +
geom_line(size = 0.9) +
labs(y = "GDP (RS)") +
scale_color_manual(
name = "Variables",
values = c("GDP (RS)" = "#0C4C8A", "IBC (RS)" = "#E69F00")
) +
scale_x_date(date_breaks = "1 year", date_labels = "%Y") +
theme_bw(base_size = 14, base_family = "EB Garamond") +
theme(
legend.position = "bottom",
axis.title.x = element_blank(),
plot.margin = margin(4, 8, 2, 8)
)
# consistent color palette
my_colors <- c("GDP (RS)" = "#0C4C8A", "IBC (RS)" = "#E69F00")
# === GDP (top) ===
p_gdp <- ggplot(dfibc, aes(x = date, y = gdp_rs)) +
geom_line(aes(color = "GDP (RS)"), size = 0.9, na.rm = TRUE) +
scale_color_manual(values = my_colors, guide = "none") +
scale_x_date(date_breaks = "1 year", date_labels = "%Y") +
labs(title = "Economic Indicators (RS)", y = "GDP (RS)", x = NULL) +
theme_bw(base_size = 14, base_family = "EB Garamond") +   # <== your font
theme(
plot.margin = margin(4, 8, 2, 8),
axis.text.x = element_text(angle = 90, vjust = 0.5, hjust = 1),
plot.title = element_text(hjust = 0.5, face = "bold"),
legend.position = "none"
)
library(ggplot2)
# === GDP (top) ===
p_gdp <- ggplot(dfibc, aes(x = date, y = gdp_rs)) +
geom_line(aes(color = "GDP (RS)"), size = 0.9, na.rm = TRUE) +
scale_color_manual(values = my_colors, guide = "none") +
scale_x_date(date_breaks = "1 year", date_labels = "%Y") +
labs(title = "Economic Indicators (RS)", y = "GDP (RS)", x = NULL) +
theme_bw(base_size = 14, base_family = "EB Garamond") +   # <== your font
theme(
plot.margin = margin(4, 8, 2, 8),
axis.text.x = element_text(angle = 90, vjust = 0.5, hjust = 1),
plot.title = element_text(hjust = 0.5, face = "bold"),
legend.position = "none"
)
ggplot(dfibc, aes(x = date, y = gdp_rs)) +
geom_line(aes(color = "GDP (RS)"), size = 0.9, na.rm = TRUE) +
scale_color_manual(values = my_colors, guide = "none") +
scale_x_date(date_breaks = "1 year", date_labels = "%Y") +
labs(title = "Economic Indicators (RS)", y = "GDP (RS)", x = NULL) +
theme_bw(base_size = 14, base_family = "EB Garamond") +   # <== your font
theme(
plot.margin = margin(4, 8, 2, 8),
axis.text.x = element_text(angle = 90, vjust = 0.5, hjust = 1),
plot.title = element_text(hjust = 0.5, face = "bold"),
legend.position = "none"
)
ggplot(dfpib, aes(x = date, y = pib_rs)) +
geom_line(aes(color = "GDP (RS)"), size = 0.9, na.rm = TRUE) +
scale_color_manual(values = my_colors, guide = "none") +
scale_x_date(date_breaks = "1 year", date_labels = "%Y") +
labs(title = "Economic Indicators (RS)", y = "GDP (RS)", x = NULL) +
theme_bw(base_size = 14, base_family = "EB Garamond") +   # <== your font
theme(
plot.margin = margin(4, 8, 2, 8),
axis.text.x = element_text(angle = 90, vjust = 0.5, hjust = 1),
plot.title = element_text(hjust = 0.5, face = "bold"),
legend.position = "none"
)
# === GDP (top) ===
ggplot(dfpib, aes(x = date, y = pib_rs)) +
geom_line(aes(color = "GDP (RS)"), size = 0.9, na.rm = TRUE) +
scale_color_manual(values = my_colors, guide = "none") +
scale_x_date(date_breaks = "1 year", date_labels = "%Y") +
labs(title = "Economic Indicators (RS)", y = "GDP (RS)", x = NULL) +
theme_bw(base_size = 14, base_family = "EB Garamond") +   # <== your font
theme(
plot.margin = margin(4, 8, 2, 8),
axis.text.x = element_text(angle = -90, vjust = 0.5, hjust = 1),
plot.title = element_text(hjust = 0.5, face = "bold"),
legend.position = "none"
)
library(showtext)
library(sysfonts)
sysfonts::font_add_google("EB Garamond")
showtext::showtext_auto()
# === GDP (top) ===
ggplot(dfpib, aes(x = date, y = pib_rs)) +
geom_line(aes(color = "GDP (RS)"), size = 0.9, na.rm = TRUE) +
scale_color_manual(values = my_colors, guide = "none") +
scale_x_date(date_breaks = "1 year", date_labels = "%Y") +
labs(title = "Economic Indicators (RS)", y = "GDP (RS)", x = NULL) +
theme_bw(base_size = 14, base_family = "EB Garamond") +   # <== your font
theme(
plot.margin = margin(4, 8, 2, 8),
axis.text.x = element_text(angle = -90, vjust = 0.5, hjust = 1),
plot.title = element_text(hjust = 0.5, face = "bold"),
legend.position = "none"
)
# === IBC (bottom) ===
ggplot(dfibc, aes(x = date, y = ibc_rs)) +
geom_line(aes(color = "IBC (RS)"), size = 0.9, na.rm = TRUE) +
scale_color_manual(
name = "Variables",
values = my_colors
) +
scale_x_date(date_breaks = "1 year", date_labels = "%Y") +
labs(y = "IBC (RS)", x = NULL) +
theme_bw(base_size = 14, base_family = "EB Garamond") +   # <== same style
theme(
plot.margin = margin(4, 8, 2, 8),
axis.text.x = element_text(angle = -90, vjust = 0.5, hjust = 1),
legend.position = "bottom",
legend.title = element_text(size = 11, family = "EB Garamond"),
legend.text = element_text(size = 10, family = "EB Garamond")
)
p_gdp <- ggplot(dfpib, aes(x = date, y = pib_rs)) +
geom_line(aes(color = "GDP (RS)"), size = 0.9, na.rm = TRUE) +
scale_color_manual(values = my_colors, guide = "none") +
scale_x_date(date_breaks = "1 year", date_labels = "%Y") +
labs(title = "Economic Indicators (RS)", y = "GDP (RS)", x = NULL) +
theme_bw(base_size = 14, base_family = "EB Garamond") +   # <== your font
theme(
plot.margin = margin(4, 8, 2, 8),
axis.text.x = element_text(angle = -90, vjust = 0.5, hjust = 1),
plot.title = element_text(hjust = 0.5, face = "bold"),
legend.position = "none"
)
# === IBC (bottom) ===
p_ibc <- ggplot(dfibc, aes(x = date, y = ibc_rs)) +
geom_line(aes(color = "IBC (RS)"), size = 0.9, na.rm = TRUE) +
scale_color_manual(
name = "Variables",
values = my_colors
) +
scale_x_date(date_breaks = "1 year", date_labels = "%Y") +
labs(y = "IBC (RS)", x = NULL) +
theme_bw(base_size = 14, base_family = "EB Garamond") +   # <== same style
theme(
plot.margin = margin(4, 8, 2, 8),
axis.text.x = element_text(angle = -90, vjust = 0.5, hjust = 1),
legend.position = "bottom",
legend.title = element_text(size = 11, family = "EB Garamond"),
legend.text = element_text(size = 10, family = "EB Garamond")
)
ggsave("GDP_plot.png", p_gdp, width = 8, height = 4, dpi = 300)
ggsave("IBC_plot.png", p_ibc, width = 8, height = 4, dpi = 300)
# === GDP (top) ===
p_gdp <- ggplot(dfpib, aes(x = date, y = pib_rs)) +
geom_line(aes(color = "GDP (RS)"), size = 0.9, na.rm = TRUE) +
scale_color_manual(values = my_colors, guide = "none") +
scale_x_date(date_breaks = "1 year", date_labels = "%Y") +
labs(title = "Economic Indicators (RS)", y = "GDP (RS)", x = NULL) +
theme_bw(base_size = 20, base_family = "EB Garamond") +   # <== your font
theme(
plot.margin = margin(4, 8, 2, 8),
axis.text.x = element_text(angle = -90, vjust = 0.5, hjust = 1),
plot.title = element_text(hjust = 0.5, face = "bold"),
legend.position = "none"
)
# === IBC (bottom) ===
p_ibc <- ggplot(dfibc, aes(x = date, y = ibc_rs)) +
geom_line(aes(color = "IBC (RS)"), size = 0.9, na.rm = TRUE) +
scale_color_manual(
name = "Variables",
values = my_colors
) +
scale_x_date(date_breaks = "1 year", date_labels = "%Y") +
labs(y = "IBC (RS)", x = NULL) +
theme_bw(base_size = 20, base_family = "EB Garamond") +   # <== same style
theme(
plot.margin = margin(4, 8, 2, 8),
axis.text.x = element_text(angle = -90, vjust = 0.5, hjust = 1),
legend.position = "bottom",
legend.title = element_text(size = 11, family = "EB Garamond"),
legend.text = element_text(size = 10, family = "EB Garamond")
)
ggsave("GDP_plot.png", p_gdp, width = 8, height = 4, dpi = 300)
ggsave("IBC_plot.png", p_ibc, width = 8, height = 4, dpi = 300)
ggplot(dfpib, aes(x = date, y = pib_rs)) +
geom_line(color = my_colors["GDP (RS)"], size = 0.9, na.rm = TRUE) +
scale_x_date(date_breaks = "1 year", date_labels = "%Y") +
labs(x = NULL, y = "GDP (RS)") +
theme_bw(base_size = 14, base_family = "EB Garamond") +
theme(
plot.margin = margin(4, 8, 2, 8),
axis.title.y = element_text(size = 16, face = "plain"),
axis.text.y  = element_text(size = 14),
axis.text.x  = element_text(size = 13, angle = 90, vjust = 0.5, hjust = 1),
axis.title.x = element_blank(),
legend.position = "none"
)
ggplot(dfpib, aes(x = date, y = pib_rs)) +
geom_line(color = my_colors["GDP (RS)"], size = 0.9, na.rm = TRUE) +
scale_x_date(date_breaks = "1 year", date_labels = "%Y") +
labs(x = NULL, y = "GDP (RS)") +
theme_bw(base_size = 14, base_family = "EB Garamond") +
theme(
plot.margin = margin(4, 8, 2, 8),
axis.title.y = element_text(size = 20, face = "plain"),
axis.text.y  = element_text(size = 20),
axis.text.x  = element_text(size = 20, angle = 90, vjust = 0.5, hjust = 1),
axis.title.x = element_blank(),
legend.position = "none"
)
ggplot(dfpib, aes(x = date, y = pib_rs)) +
geom_line(color = my_colors["GDP - RS"], size = 0.9, na.rm = TRUE) +
scale_x_date(date_breaks = "1 year", date_labels = "%Y") +
labs(x = NULL, y = "GDP (RS)") +
theme_bw(base_size = 14, base_family = "EB Garamond") +
theme(
plot.margin = margin(4, 8, 2, 8),
axis.title.y = element_text(size = 20, face = "plain"),
axis.text.y  = element_text(size = 20),
axis.text.x  = element_text(size = 20, angle = 90, vjust = 0.5, hjust = 1),
axis.title.x = element_blank(),
legend.position = "none"
)
ggplot(dfpib, aes(x = date, y = pib_rs)) +
geom_line(color = my_colors["GDP - RS"], size = 0.9, na.rm = TRUE) +
scale_x_date(date_breaks = "1 year", date_labels = "%Y") +
labs(x = NULL, y = "GDP (RS)") +
theme_bw(base_size = 14, base_family = "EB Garamond") +
theme(
plot.margin = margin(4, 8, 2, 8),
axis.title.y = element_text(size = 20, face = "plain"),
axis.text.y  = element_text(size = 20),
axis.text.x  = element_text(size = 20, angle = 90, vjust = 0.5, hjust = 1),
axis.title.x = element_blank(),
legend.position = "none"
)
ggplot(dfpib, aes(x = date, y = pib_rs)) +
geom_line(color = my_colors["GDP (RS)"], size = 0.9, na.rm = TRUE) +
scale_x_date(date_breaks = "1 year", date_labels = "%Y") +
labs(x = NULL, y = "GDP - RS") +
theme_bw(base_size = 14, base_family = "EB Garamond") +
theme(
plot.margin = margin(4, 8, 2, 8),
axis.title.y = element_text(size = 20, face = "plain"),
axis.text.y  = element_text(size = 20),
axis.text.x  = element_text(size = 20, angle = 90, vjust = 0.5, hjust = 1),
axis.title.x = element_blank(),
legend.position = "none"
)
ggplot(dfpib, aes(x = date, y = pib_rs)) +
geom_line(color = my_colors["GDP (RS)"], size = 0.9, na.rm = TRUE) +
scale_x_date(date_breaks = "1 year", date_labels = "%Y") +
labs(x = NULL, y = "GDP of Rio Grande do Sul") +
theme_bw(base_size = 14, base_family = "EB Garamond") +
theme(
plot.margin = margin(4, 8, 2, 8),
axis.title.y = element_text(size = 20, face = "plain"),
axis.text.y  = element_text(size = 20),
axis.text.x  = element_text(size = 20, angle = 90, vjust = 0.5, hjust = 1),
axis.title.x = element_blank(),
legend.position = "none"
)
ggplot(dfpib, aes(x = date, y = pib_rs)) +
geom_line(color = my_colors["GDP (RS)"], size = 0.9, na.rm = TRUE) +
scale_x_date(date_breaks = "1 year", date_labels = "%Y") +
labs(x = NULL, y = "GDP") +
theme_bw(base_size = 14, base_family = "EB Garamond") +
theme(
plot.margin = margin(4, 8, 2, 8),
axis.title.y = element_text(size = 20, face = "plain"),
axis.text.y  = element_text(size = 20),
axis.text.x  = element_text(size = 20, angle = 90, vjust = 0.5, hjust = 1),
axis.title.x = element_blank(),
legend.position = "none"
)
ggplot(dfpib, aes(x = date, y = pib_rs)) +
geom_line(color = my_colors["GDP (RS)"], size = 0.9, na.rm = TRUE) +
scale_x_date(date_breaks = "1 year", date_labels = "%Y") +
labs(x = NULL, y = "GDP") +
theme_bw(base_size = 14, base_family = "EB Garamond") +
theme(
plot.margin = margin(4, 8, 2, 8),
axis.title.y = element_text(size = 20, face = "plain"),
axis.text.y  = element_text(size = 20),
axis.text.x  = element_text(size = 20, angle = -90, vjust = 0.5, hjust = 1),
axis.title.x = element_blank(),
legend.position = "none"
)
# === GDP (top) ===
p_gdp <- ggplot(dfpib, aes(x = date, y = pib_rs)) +
geom_line(color = my_colors["GDP (RS)"], size = 0.9, na.rm = TRUE) +
scale_x_date(date_breaks = "1 year", date_labels = "%Y") +
labs(x = NULL, y = "GDP") +
theme_bw(base_size = 14, base_family = "EB Garamond") +
theme(
plot.margin = margin(4, 8, 2, 8),
axis.title.y = element_text(size = 20, face = "plain"),
axis.text.y  = element_text(size = 20),
axis.text.x  = element_text(size = 20, angle = -90, vjust = 0.5, hjust = 1),
axis.title.x = element_blank(),
legend.position = "none"
)
ggsave("GDP_plot.png", p_gdp, width = 8, height = 4, dpi = 300)
# === GDP (top) ===
p_gdp <- ggplot(dfpib, aes(x = date, y = pib_rs)) +
geom_line(color = my_colors["GDP (RS)"], size = 0.9, na.rm = TRUE) +
scale_x_date(date_breaks = "1 year", date_labels = "%Y") +
labs(x = NULL, y = "GDP") +
theme_bw(base_size = 14, base_family = "EB Garamond") +
theme(
plot.margin = margin(4, 8, 2, 8),
axis.title.y = element_text(size = 50, face = "plain"),
axis.text.y  = element_text(size = 50),
axis.text.x  = element_text(size = 50, angle = -90, vjust = 0.5, hjust = 1),
axis.title.x = element_blank(),
legend.position = "none"
)
ggsave("GDP_plot.png", p_gdp, width = 8, height = 4, dpi = 300)
# === IBC (bottom) ===
p_ibc <- ggplot(dfibc, aes(x = date, y = ibc_rs)) +
geom_line(color = my_colors["IBC (RS)"], size = 0.9, na.rm = TRUE) +
scale_x_date(date_breaks = "1 year", date_labels = "%Y") +
labs(x = NULL, y = "IBC-RS") +
theme_bw(base_size = 14, base_family = "EB Garamond") +
theme(
plot.margin = margin(4, 8, 2, 8),
axis.title.y = element_text(size = 50, face = "plain"),
axis.text.y  = element_text(size = 50),
axis.text.x  = element_text(size = 50, angle = -90, vjust = 0.5, hjust = 1),
axis.title.x = element_blank(),
legend.position = "none"
)
ggsave("IBC_plot.png", p_ibc, width = 8, height = 4, dpi = 300)
ggsave("GDP_plot.png", p_gdp, width = 8, height = 2, dpi = 300)
ggsave("IBC_plot.png", p_ibc, width = 8, height = 2, dpi = 300)
p_ibc <- ggplot(dfibc, aes(x = date, y = ibc_rs)) +
geom_line(color = my_colors["IBC (RS)"], size = 0.9, na.rm = TRUE) +
scale_x_date(date_breaks = "1 year", date_labels = "%Y") +
labs(x = NULL, y = "IBC-RS") +
theme_bw(base_size = 14, base_family = "EB Garamond") +
theme(
plot.margin = margin(4, 8, 2, 8),
axis.title.y = element_text(size = 50, face = "plain"),
axis.text.y  = element_text(size = 50),
axis.text.x  = element_text(size = 40, angle = -90, vjust = 0.5, hjust = 1),
axis.title.x = element_blank(),
legend.position = "none"
)
print(p_ibc)
rm(p_gdp, p_ibc)
ggsave("Plots/GDP_plot.png", p_gdp, width = 8, height = 2, dpi = 300)
# === GDP (top) ===
p_gdp <- ggplot(dfpib, aes(x = date, y = pib_rs)) +
geom_line(color = my_colors["GDP (RS)"], size = 0.9, na.rm = TRUE) +
scale_x_date(date_breaks = "1 year", date_labels = "%Y") +
labs(x = NULL, y = "GDP") +
theme_bw(base_size = 14, base_family = "EB Garamond") +
theme(
plot.margin = margin(4, 8, 2, 8),
axis.title.y = element_text(size = 50, face = "plain"),
axis.text.y  = element_text(size = 50),
axis.text.x  = element_text(size = 40, angle = -90, vjust = 0.5, hjust = 1),
axis.title.x = element_blank(),
legend.position = "none"
)
ggsave("Plots/GDP_plot.png", p_gdp, width = 8, height = 2, dpi = 300)
rm(p_gdp, p_ibc)
# === IBC (bottom) ===
p_ibc <- ggplot(dfibc, aes(x = date, y = ibc_rs)) +
geom_line(color = my_colors["IBC (RS)"], size = 0.9, na.rm = TRUE) +
scale_x_date(date_breaks = "1 year", date_labels = "%Y") +
labs(x = NULL, y = "IBCR-Rs") +
theme_bw(base_size = 14, base_family = "EB Garamond") +
theme(
plot.margin = margin(4, 8, 2, 8),
axis.title.y = element_text(size = 50, face = "plain"),
axis.text.y  = element_text(size = 50),
axis.text.x  = element_text(size = 40, angle = -90, vjust = 0.5, hjust = 1),
axis.title.x = element_blank(),
legend.position = "none"
)
ggsave("Plots/IBC_plot.png", p_ibc, width = 8, height = 2, dpi = 300)
get_quarterly <- function(df) {
#' Aggregate Monthly Data to Quarterly (mean of months)
#' @param df A data.frame with a "date" column and numeric monthly variables.
#' @return A data.frame aggregated to quarterly frequency (full quarters only).
df$date <- as.Date(df$date)
numeric_cols <- setdiff(names(df), "date")
# Assign quarter IDs
y <- as.integer(format(df$date, "%Y"))
m <- as.integer(format(df$date, "%m"))
qid <- paste0(y, "Q", (m - 1) %/% 3 + 1)
# Keep only quarters with 3 observations
counts <- table(qid)
valid_q <- names(counts[counts == 3])
df <- df[qid %in% valid_q, ]
qid <- qid[qid %in% valid_q]
# Aggregate numeric columns by quarter
agg <- t(sapply(split(df[, numeric_cols, drop = FALSE], qid), colMeans))
# Determine first day of last month in each quarter
last_dates <- tapply(df$date, qid, max)
quarter_dates <- as.Date(sprintf("%04d-%02d-01", as.integer(format(last_dates, "%Y")),
as.integer(format(last_dates, "%m"))))
# Build final data.frame
out_df <- data.frame(date = quarter_dates, agg, row.names = NULL)
out_df[order(out_df$date), , drop = FALSE]
}
to_quarterly <- function(df, date_col = "date",
agg = c("last","sum","mean","first")) {
agg <- match.arg(agg)
df <- df %>%
# ensure date and build q_date as YYYY-MM-01 (last month of quarter)
mutate(
!!date_col := as.Date(.data[[date_col]]),
q_date = as.Date(paste0(year(.data[[date_col]]),
"-", sprintf("%02d", quarter(.data[[date_col]]) * 3),
"-01"))
) %>%
group_by(q_date) %>%
# apply chosen aggregation to all numeric columns (your numeric measurement columns)
{
if (agg == "last")    summarise(., across(where(is.numeric), ~ last(.x)))
else if (agg == "sum") summarise(., across(where(is.numeric), ~ sum(.x)))
else if (agg == "mean")summarise(., across(where(is.numeric), ~ mean(.x)))
else                  summarise(., across(where(is.numeric), ~ first(.x)))
} %>%
ungroup() %>%
arrange(q_date)
# rename q_date -> date (Date class, YYYY-MM-01)
names(df)[names(df) == "q_date"] <- "date"
df$date <- as.Date(df$date)
df
}
View(logw_results)
nacional <- read.csv("Data/data_NSA/nacional_mensal.csv")
regional <- read.csv2("Data/data_NSA/regional_mensal.csv")
meteorologicos <- read.csv("Data/data_NSA/meteorologicos_mensal.csv")
ipea <- read.csv("Data/data_NSA/dadosipeaNSA.csv")
varmonth <- read.csv2("Data/data_NSA/Varmonth.csv")
varmonth_1 <- varmonth[13:281, -1] #
meteorologicos_1 <- meteorologicos[25:293, -(1:2)] # -2
#weather_1 <- weather[13:281, -1] # -1
regional_1 <- regional[14:282, -(1:2)] # -2
nacional_1 <- nacional[14:282, -(1:2)] # -2
ipea_1 <- ipea[13:281, -1]
rawm_ibc <- cbind(varmonth_1, meteorologicos_1, ipea_1, regional_1, nacional_1)
#raww_ibc <- cbind(varmonth_1, weather_1, ipea_1, regional_1, nacional_1)
rawm_ibc <- rawm_ibc %>% select(date, everything())
library(dplyr)
library(readr)
library(lubridate)
library(tidyr)
varmonth_1 <- varmonth[13:281, -1] #
meteorologicos_1 <- meteorologicos[25:293, -(1:2)] # -2
#weather_1 <- weather[13:281, -1] # -1
regional_1 <- regional[14:282, -(1:2)] # -2
nacional_1 <- nacional[14:282, -(1:2)] # -2
ipea_1 <- ipea[13:281, -1]
rawm_ibc <- cbind(varmonth_1, meteorologicos_1, ipea_1, regional_1, nacional_1)
#raww_ibc <- cbind(varmonth_1, weather_1, ipea_1, regional_1, nacional_1)
rawm_ibc <- rawm_ibc %>% select(date, everything())
#raww_ibc <- raww_ibc %>% select(date, everything())
rawm_ibc[,1] <- as.Date(rawm_ibc[,1])
#raww_ibc[,1] <- as.Date(raww_ibc[,1])
saveRDS(rawm_ibc, "rawM_ibc.rds")
#saveRDS(raww_ibc, "rawW_ibc.rds")
rm(varmonth_1, meteorologicos_1, regional_1, nacional_1, ipea_1)
#rm(varmonth,meteorologicos, weather, regional, nacional, ipea)
varmonth_1 <- varmonth[13:281, -1] #
meteorologicos_1 <- meteorologicos[25:293, -(1:2)] # -2
#weather_1 <- weather[13:281, -1] # -1
regional_1 <- regional[14:282, -(1:2)] # -2
nacional_1 <- nacional[14:282, -(1:2)] # -2
ipea_1 <- ipea[13:281, -1]
rawm_ibc <- cbind(varmonth_1, meteorologicos_1, ipea_1, regional_1, nacional_1)
#raww_ibc <- cbind(varmonth_1, weather_1, ipea_1, regional_1, nacional_1)
rawm_ibc <- rawm_ibc %>% select(date, everything())
#raww_ibc <- raww_ibc %>% select(date, everything())
rawm_ibc[,1] <- as.Date(rawm_ibc[,1])
#raww_ibc[,1] <- as.Date(raww_ibc[,1])
varmonth_1
View(varmonth_1)
View(rawm_ibc)
rm(varmonth_1, meteorologicos_1, regional_1, nacional_1, ipea_1)
rm(varmonth,meteorologicos, regional, nacional, ipea)
# === IBC (bottom) ===
p_ibc <- ggplot(dfibc, aes(x = date, y = ibc_rs)) +
geom_line(color = my_colors["IBC (RS)"], size = 0.9, na.rm = TRUE) +
scale_x_date(date_breaks = "1 year", date_labels = "%Y") +
labs(x = NULL, y = "IBCR-RS") +
theme_bw(base_size = 14, base_family = "EB Garamond") +
theme(
plot.margin = margin(4, 8, 2, 8),
axis.title.y = element_text(size = 50, face = "plain"),
axis.text.y  = element_text(size = 50),
axis.text.x  = element_text(size = 40, angle = -90, vjust = 0.5, hjust = 1),
axis.title.x = element_blank(),
legend.position = "none"
)
ggsave("Plots/IBC_plot.png", p_ibc, width = 8, height = 2, dpi = 300)
